var A=(t=[])=>{let s=(...e)=>console.warn(...e),n=new Map(t);return{clear:()=>n.clear(),delete:e=>{if(n.has(e)){let o=n.get(e);return o.forEach(c=>{let l=n.get(c);l.delete(e),l.size||n.delete(c)}),n.delete(e),o}},remove:e=>o=>{if(n.has(e)){let c=n.get(e);c.delete(o),c.size||n.delete(e)}if(n.has(o)){let c=n.get(o);c.delete(e),c.size||n.delete(o)}},size:()=>n.size,has:e=>{if(n.has(e)){let o=n.get(e);return c=>new Set(o).has(c)}return!1},get:e=>n.has(e)?new Set(n.get(e)):void 0,set:e=>o=>{n.has(e)?n.get(e).add(o):n.set(e,new Set([o])),n.has(o)?n.get(o).add(e):n.set(o,new Set([e]))},nodes:()=>new Set(n.keys()),edges:()=>{let e=[];return n.forEach((o,c)=>o.forEach(l=>e.push([c,l]))),e},tidy:()=>{n.entries().map(([e,o])=>{loop(c=>{n.has(c)?n.get(c).has(e)||s("non-bidirectional | exists in set, not in map: ",e):s("non-bidirectional | exists in map, not in set: ",c)})(o)})}}};var i=t=>s=>{for(let n of s)t(n)},U=t=>(console.log(t),t),w=t=>({children:(s,n="*")=>[...s.children][t](e=>e.matches(n)),siblings:(s,n="*")=>[...s.parentElement.children][t](e=>e.matches(n))});w.index=(t,s)=>extendQSA.children(t,s).indexOf(t);var b=Object.assign((t,s=document)=>s.querySelectorAll(t),w("filter")),z=Object.assign((t,s=document)=>s.querySelector(t),w("find")),N=t=>t.tagName?t:t.parentElement,T=(t,...s)=>t(...s),x=()=>{},R=t=>t,B=t=>t.replace(/-./g,s=>s.toUpperCase()[1]),G=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var L=/^\s*|false|f|0|\s*$/i,k=t=>typeof t=="string"?!L.test(t):!!t,q=(t,s)=>{if(t===s)return!0;if(t instanceof Date&&s instanceof Date)return t.getTime()===s.getTime();if(!t||!s||typeof t!="object"&&typeof s!="object")return t===s;if(t.prototype!==s.prototype)return!1;let n=Object.keys(t);return n.length!==Object.keys(s).length?!1:n.every(e=>q(t[e],s[e]))};var V=(t,s=x)=>(...n)=>{try{return t(...n)}catch(e){return s(e,...n)}},H=(t,s)=>async(...n)=>{let e=s||t.name;performance.mark("a");let o=await Promise.resolve(t(...n));return performance.mark("b"),performance.measure(e,"a","b"),i(console.log)(performance.getEntriesByName(e,"measure")),o},K=(t,s)=>{if(t===s)return 0;var n=t.compareDocumentPosition(s);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0},C=t=>("sort"in t?t:[...t]).sort(K),W={1:t=>{let s={};return i(n=>{s[n.name]=n.value})(t.attributes),s},2:(t,s)=>t.getAttribute(s),3:(t,s,n)=>t.setAttribute(s,n)},Y=(...t)=>W[t.length](t),Z={2:(t,s)=>getComputedStyle(t).getPropertyValue(s),3:(t,s,n)=>{t.style[s]=n}},J=(...t)=>Z[t.length](...t);var X=async t=>{let s={root:t.root||document,scheduleInit:t.scheduleInit||(r=>addEventListener("DOMContentLoaded",r,{once:!0})),scheduleQueue:t.scheduleQueue||(r=>r())},n={attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0},e={graph:A(),match:new Set,query:new Set,queue:new Set,after:new Set,plugins:new Set(t.plugins||[]),allSelect:""},o=()=>{e.allSelect=[...e.plugins].map(r=>r.select).join()},c=()=>{e.match.clear(),e.query.clear(),e.queue.clear(),e.after.clear()},l=r=>()=>{r.isConnected||(i(a=>e.graph.delete(a))(b("*",r)),e.graph.delete(r))},O=r=>{let a=e.graph.get(r);!a||(i(f=>f.update(r))(a),e.after.add(l(r)))},d=({parentElement:r})=>{!r||e.queue.has(r)||(d(r),e.graph.has(r)&&e.queue.add(r))},y=r=>a=>{let f=r.matches(a.select),u=e.graph.has(a,r);u!==f&&(f?e.graph.set(a)(r):e.after.add(()=>{e.graph.remove(a)(r)})),(u||f)&&e.queue.add(r)},g=r=>[...e.plugins].map(y(r)),p=r=>{(r.matches(e.allSelect)||e.graph.has(r))&&e.match.add(r),i(a=>e.match.add(a))(b(e.allSelect,r)),i(a=>e.graph.has(a)&&e.match.add(a))(b("*",r))},m=()=>{i(p)(e.query),i(g)(e.match),i(d)(e.queue),i(O)(C(e.queue)),i(T)(e.after),c()},I=i(r=>{let a=N(r);a&&e.query.add(a)}),D=r=>{r.type==="attributes"&&(e.match.add(N(r.target)),r.attributeName in Object.getPrototypeOf(r.target)||delete r.target[r.attributeName]),r.addedNodes.length&&I(r.addedNodes),r.removedNodes.length&&I(r.removedNodes),e.match.add(N(r.target))},F=r=>{!e.allSelect||(i(D)(r),s.scheduleQueue(m))},_=new MutationObserver(F),Q=r=>a=>{e.graph.set(r)(a),r.update(a)},M=r=>r.select&&i(Q(r))(b(r.select,s.root)),v=()=>{let f=Object.assign(u=>[...e.graph.get(u)],{add:u=>{e.plugins.add(u),M(u)},clear:()=>{c(),e.graph.clear()},delete:u=>{e.plugins.delete(u),e.graph.delete(u)},plugins:()=>[...e.plugins],has:u=>e.graph.has(u)});return t.debug?Object.assign(f,{debug:e}):f},$=async r=>{i(M)(e.plugins),o(),_.observe(s.root,n),r(v())};return new Promise(r=>s.scheduleInit(()=>$(r)))};var S=(t,s)=>new Proxy(t,{get:(n,e)=>s[e].bind(s),apply:function(n,e,o){return t(...o)}}),E=new Map;function j(t){E.has(t)||E.set(t,new Map);let s=E.get(t);return S(e=>{s.has(e)||s.set(e,new Map);let o=s.get(e);return S((l,O)=>{let d=E.get(e),y=(...g)=>{let p=d.has(l)?O(d.get(l),g):g;d.set(l,p)};return t(e,d),S(y,d)},o)},s)}var ee=(t,s)=>t(()=>{let n=([e,o])=>e(...o);s.entries().forEach(n),s.clear()}),te=j(ee),P=(t,s)=>{t(()=>{let[n,e]=s.entries().next().value;n(...e),s.delete(n),P(t,s)})},ne=j(P),h=t=>s=>{let n={fn:s,canceled:!1};n.cancel=()=>n.canceled=!0,n.throttler=l=>{n.throttle=()=>{n.throttled||(l(()=>n.throttled=!1)(),n.throttled=!0)}};let e={fn:void 0},o=(...l)=>e.fn(...l),c=(...l)=>{n.args=l,n.debounce&&(n.debounce=Date.now()),n.callback=()=>n.fn(...n.args);let O=(g,p)=>[n.canceled,n.throttled,n.debounce&&n.debounce!==g,()=>p(n.callback())].find(m=>m),d=g=>p=>{let m=[O(g,p),n];m.length=t.length,t(...m)};n.throttle&&n.throttle();let y=new Promise(d(n.debounce));return S(o,Object.assign(y,n))};return e.fn=c,c},se=h(t=>t),re=h(queueMicrotask),oe=h(setTimeout),ce=h(requestAnimationFrame),ae=h(t=>requestAnimationFrame(()=>requestAnimationFrame(t))),ie=h(requestIdleCallback),le=(t=0)=>h(s=>setTimeout(s,t)),ue=h((t,s)=>{t(),s.cancel()});export{A as Graph,z as QS,b as QSA,k as asBool,N as asEl,Y as attr,te as batch,G as camelToKebab,J as css,q as equals,S as extendFunction,R as identity,ie as idle,T as invoke,B as kebabToCamel,U as log,i as loop,V as maybe,ae as next,x as noop,X as onDom,ue as once,h as orca,H as perf,ne as recur,C as sortEls,se as sync,oe as task,re as then,ce as tick,le as wait};
//# sourceMappingURL=index.js.map
