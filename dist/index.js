var w=(e=[])=>{let s=(...t)=>console.warn(...t),n=new Map(e);return{clear:()=>n.clear(),delete:t=>{if(n.has(t)){let r=n.get(t);return r.forEach(c=>{let u=n.get(c);u.delete(t),u.size||n.delete(c)}),n.delete(t),r}},remove:t=>r=>{if(n.has(t)){let c=n.get(t);c.delete(r),c.size||n.delete(t)}if(n.has(r)){let c=n.get(r);c.delete(t),c.size||n.delete(r)}},size:()=>n.size,has:t=>{if(n.has(t)){let r=n.get(t);return c=>new Set(r).has(c)}return!1},get:t=>n.has(t)?new Set(n.get(t)):void 0,set:t=>r=>{n.has(t)?n.get(t).add(r):n.set(t,new Set([r])),n.has(r)?n.get(r).add(t):n.set(r,new Set([t]))},nodes:()=>new Set(n.keys()),edges:()=>{let t=[];return n.forEach((r,c)=>r.forEach(u=>t.push([c,u]))),t},tidy:()=>{n.entries().map(([t,r])=>{loop(c=>{n.has(c)?n.get(c).has(t)||s("non-bidirectional | exists in set, not in map: ",t):s("non-bidirectional | exists in map, not in set: ",c)})(r)})}}};var i=e=>s=>{for(let n of s)e(n)},z=e=>(console.log(e),e),b=(e,s=document)=>s.querySelectorAll(e),G=(e,s=document)=>s.querySelector(e),S=e=>e.tagName?e:e.parentElement,T=(e,...s)=>e(...s),P=()=>{},L=e=>e,B=e=>e.replace(/-./g,s=>s.toUpperCase()[1]),k=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j=/^\s*|false|f|no|0||\s*$/i,H=e=>typeof e=="string"?!j.test(e):!!e,C=(e,s)=>{if(e===s)return!0;if(e instanceof Date&&s instanceof Date)return e.getTime()===s.getTime();if(!e||!s||typeof e!="object"&&typeof s!="object")return e===s;if(e.prototype!==s.prototype)return!1;let n=Object.keys(e);return n.length!==Object.keys(s).length?!1:n.every(t=>C(e[t],s[t]))};var x=(e,s=P)=>(...n)=>{try{return e(...n)}catch(t){return s(t,...n)}},K=(e,s)=>async(...n)=>{let t=s||e.name;performance.mark("a");let r=await Promise.resolve(e(...n));return performance.mark("b"),performance.measure(t,"a","b"),i(console.log)(performance.getEntriesByName(t,"measure")),r},V=(e,s)=>{if(e===s)return 0;var n=e.compareDocumentPosition(s);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0},A=e=>("sort"in e?e:[...e]).sort(V),W={1:e=>{let s={};return i(n=>{s[n.name]=n.value})(e.attributes),s},2:(e,s)=>e.getAttribute(s),3:(e,s,n)=>e.setAttribute(s,n)},M=(e,...s)=>(n,...t)=>{if(!(e in n)){let r=Function(...s,n.getAttribute(e)).bind(n);n[e]=r}return n[e](...t)},Y=/^[\.\[]/,Z=(e,s)=>n=>{if(!(e in n)){let t=n.getAttribute(e),r=Y.test(t)?t:"."+t;n[e]=Function("maybe","obj",`return maybe((...a) => {
          if (a.length) {
            const [value] = a;
            log(value);
            obj${r} = value;
          }
          return obj${r};
        });`)(x,s)}return n[e]},J={event:e=>s=>M(e,"event")(s.target,s),entry:e=>s=>M(e,"entry")(s.target,s),js:M,path:Z},X=(...e)=>W[e.length](e),ee={2:(e,s)=>getComputedStyle(e).getPropertyValue(s),3:(e,s,n)=>{e.style[s]=n}},te=(...e)=>ee[e.length](...e);var ne=async e=>{let s={root:e.root||document,scheduleInit:e.scheduleInit||(o=>addEventListener("DOMContentLoaded",o,{once:!0})),scheduleQueue:e.scheduleQueue||(o=>o())},n={attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0},t={graph:w(),match:new Set,query:new Set,queue:new Set,after:new Set,plugins:new Set(e.plugins||[]),allSelect:""},r=()=>{t.allSelect=[...t.plugins].map(o=>o.select).join()},c=()=>{t.match.clear(),t.query.clear(),t.queue.clear(),t.after.clear()},u=o=>()=>{o.isConnected||(i(a=>t.graph.delete(a))(b("*",o)),t.graph.delete(o))},y=o=>{let a=t.graph.get(o);!a||(i(p=>p.update(o))(a),t.after.add(u(o)))},d=({parentElement:o})=>{!o||t.queue.has(o)||(d(o),t.graph.has(o)&&t.queue.add(o))},O=o=>a=>{let p=o.matches(a.select),l=t.graph.has(a,o);l!==p&&(p?t.graph.set(a)(o):t.after.add(()=>{t.graph.remove(a)(o)})),(l||p)&&t.queue.add(o)},g=o=>[...t.plugins].map(O(o)),f=o=>{(o.matches(t.allSelect)||t.graph.has(o))&&t.match.add(o),i(a=>t.match.add(a))(b(t.allSelect,o)),i(a=>t.graph.has(a)&&t.match.add(a))(b("*",o))},m=()=>{i(f)(t.query),i(g)(t.match),i(d)(t.queue),console.log(t.queue),i(y)(A(t.queue)),i(T)(t.after),c()},q=i(o=>{let a=S(o);a&&t.query.add(a)}),v=o=>{o.type==="attributes"&&(t.match.add(S(o.target)),o.attributeName in Object.getPrototypeOf(o.target)||delete o.target[o.attributeName]),o.addedNodes.length&&q(o.addedNodes),o.removedNodes.length&&q(o.removedNodes),t.match.add(S(o.target))},_=o=>{!t.allSelect||(i(v)(o),s.scheduleQueue(m))},Q=new MutationObserver(_),$=o=>a=>{t.graph.set(o)(a),o.update(a)},I=o=>o.select&&i($(o))(b(o.select,s.root)),R=()=>{let p=Object.assign(l=>[...t.graph.get(l)],{add:l=>{t.plugins.add(l),I(l)},clear:()=>{c(),t.graph.clear()},delete:l=>{t.plugins.delete(l),t.graph.delete(l)},has:l=>t.graph.has(l)});return e.debug?Object.assign(p,{debug:t}):p},U=async o=>{i(I)(t.plugins),r(),Q.observe(s.root,n),o(R())};return new Promise(o=>s.scheduleInit(()=>U(o)))};var E=(e,s)=>new Proxy(e,{get:(n,t)=>s[t].bind(s),apply:function(n,t,r){return e(...r)}}),N=new Map;function F(e){N.has(e)||N.set(e,new Map);let s=N.get(e);return E(t=>{s.has(t)||s.set(t,new Map);let r=s.get(t);return E((u,y)=>{let d=N.get(t),O=(...g)=>{let f=d.has(u)?y(d.get(u),g):g;d.set(u,f)};return e(t,d),E(O,d)},r)},s)}var se=(e,s)=>e(()=>{let n=([t,r])=>t(...r);s.entries().forEach(n),s.clear()}),oe=F(se),D=(e,s)=>{e(()=>{let[n,t]=s.entries().next().value;n(...t),s.delete(n),D(e,s)})},re=F(D),h=e=>s=>{let n={fn:s,canceled:!1};n.cancel=()=>n.canceled=!0,n.throttler=u=>{n.throttle=()=>{n.throttled||(u(()=>n.throttled=!1)(),n.throttled=!0)}};let t={fn:void 0},r=(...u)=>t.fn(...u),c=(...u)=>{n.args=u,n.debounce&&(n.debounce=Date.now()),n.callback=()=>n.fn(...n.args);let y=(g,f)=>[n.canceled,n.throttled,n.debounce&&n.debounce!==g,()=>f(n.callback())].find(m=>m),d=g=>f=>{let m=[y(g,f),n];m.length=e.length,e(...m)};n.throttle&&n.throttle();let O=new Promise(d(n.debounce));return E(r,Object.assign(O,n))};return t.fn=c,c},ce=h(e=>e),ae=h(queueMicrotask),ie=h(setTimeout),ue=h(requestAnimationFrame),le=h(e=>requestAnimationFrame(()=>requestAnimationFrame(e))),de=h(requestIdleCallback),he=(e=0)=>h(s=>setTimeout(s,e)),ge=h((e,s)=>{e(),s.cancel()});export{w as Graph,G as QS,b as QSA,H as asBool,S as asEl,X as attr,oe as batch,k as camelToKebab,te as css,C as equals,E as extendFunction,j as falseRE,L as identity,de as idle,T as invoke,B as kebabToCamel,z as log,i as loop,x as maybe,le as next,P as noop,ne as onDom,ge as once,h as orca,K as perf,re as recur,J as resolve,A as sortEls,ce as sync,ie as task,ae as then,ue as tick,he as wait};
//# sourceMappingURL=index.js.map
