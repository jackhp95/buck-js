import{reactive as D,effect as B,stop as E}from"https://jackhpeterson.com/__/esm/@vue/reactivity";var m=t=>({children:(n,r="*")=>[...n.children][t](o=>o.matches(r)),siblings:(n,r="*")=>[...n.parentElement.children][t](o=>o.matches(r))});m.index=(t,n)=>extendQSA.children(t,n).indexOf(t);var S=Object.assign((t,n=document)=>n.querySelectorAll(t),m("filter")),y=Object.assign((t,n=document)=>n.querySelector(t),m("find"));var A=()=>{};var j=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var e={Value:t=>n=>(...r)=>r.length?n[t]=r[0]:n[t],Number:t=>n=>(...r)=>r.length?n[t]=Number(r[0]):Number(n[t]),String:t=>n=>(...r)=>r.length?n[t]=r[0]||"":n[t]||"",Boolean:t=>n=>(...r)=>r.length?n[t]=!!r[0]:!!n[t],Object:t=>n=>(...r)=>r.length?Object.assign(n[t],r[0]):n[t],Array:t=>n=>(...r)=>r.length?n[t]=r[0]:[...n[t]],ContentEditable:t=>(...n)=>n.length?t.contentEditable=n[0]?"true":"false":t.isContentEditable,Attributes:t=>(...n)=>{let r=()=>Object.entries(n[0]).reduce((i,[a,s])=>(t.setAttribute(a,s),i[a]=s,i),{}),o=()=>[...t.attributes].reduce((i,a)=>(i[a.name]=a.value,i),{});return n.length?r():o()}};var b=(t,n)=>{if(t===n)return!0;if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(!t||!n||typeof t!="object"&&typeof n!="object")return t===n;if(t.prototype!==n.prototype)return!1;let r=Object.keys(t);return r.length!==Object.keys(n).length?!1:r.every(o=>b(t[o],n[o]))},P=/^[\w|\$|\_][\w|\$|\_|0-9]+/,R=t=>P.test(t)?`${t}.`:`[${t.replaceAll('"','\\"')}].`,h=(t,n)=>{let{prefix:r,join:o}=Object.assign({prefix:"",join:R},n);return Object.keys(t).reduce((i,a)=>{let s=r.length?`${r}`:"";return typeof t[a]=="object"&&t[a]!==null&&Object.keys(t[a]).length>0?Object.assign(i,h(t[a],{prefix:s+o(a),join:o})):i[s+a]=t[a],i},{})},x=(t,n=A)=>(...r)=>{try{return t(...r)}catch(o){return n(o,...r)}};var N={Atomic:e.String("ariaAtomic"),AutoComplete:e.String("ariaAutoComplete"),Busy:e.String("ariaBusy"),Checked:e.String("ariaChecked"),ColCount:e.String("ariaColCount"),ColIndex:e.String("ariaColIndex"),ColIndexText:e.String("ariaColIndexText"),ColSpan:e.String("ariaColSpan"),Current:e.String("ariaCurrent"),Description:e.String("ariaDescription"),Disabled:e.String("ariaDisabled"),Expanded:e.String("ariaExpanded"),HasPopup:e.String("ariaHasPopup"),Hidden:e.String("ariaHidden"),KeyShortcuts:e.String("ariaKeyShortcuts"),Label:e.String("ariaLabel"),Level:e.String("ariaLevel"),Live:e.String("ariaLive"),Modal:e.String("ariaModal"),Multiline:e.String("ariaMultiline"),MultiSelectable:e.String("ariaMultiSelectable"),Orientation:e.String("ariaOrientation"),Placeholder:e.String("ariaPlaceholder"),PosInSet:e.String("ariaPosInSet"),Pressed:e.String("ariaPressed"),ReadOnly:e.String("ariaReadOnly"),Relevant:e.String("ariaRelevant"),Required:e.String("ariaRequired"),RoleDescription:e.String("ariaRoleDescription"),RowCount:e.String("ariaRowCount"),RowIndex:e.String("ariaRowIndex"),RowIndexText:e.String("ariaRowIndexText"),RowSpan:e.String("ariaRowSpan"),Selected:e.String("ariaSelected"),SetSize:e.String("ariaSetSize"),Sort:e.String("ariaSort"),ValueMax:e.String("ariaValueMax"),ValueMin:e.String("ariaValueMin"),ValueNow:e.String("ariaValueNow"),ValueText:e.String("ariaValueText")},Z={self:e.Object("self"),name:e.String("name"),history:e.Object("history"),customElements:e.Object("customElements"),locationbar:e.Object("locationbar"),menubar:e.Object("menubar"),personalbar:e.Object("personalbar"),scrollbars:e.Object("scrollbars"),statusbar:e.Object("statusbar"),toolbar:e.Object("toolbar"),status:e.String("status"),closed:e.Boolean("closed"),frames:e.Object("frames"),length:e.Number("length"),opener:e.Object("opener"),parent:e.Object("parent"),frameElement:e.Object("frameElement"),navigator:e.Object("navigator"),clientInformation:e.Object("clientInformation"),external:e.Object("external"),screen:e.Object("screen"),innerWidth:e.Number("innerWidth"),innerHeight:e.Number("innerHeight"),scrollX:e.Number("scrollX"),pageXOffset:e.Number("pageXOffset"),scrollY:e.Number("scrollY"),pageYOffset:e.Number("pageYOffset"),screenLeft:e.Number("screenLeft"),screenTop:e.Number("screenTop"),screenX:e.Number("screenX"),screenY:e.Number("screenY"),outerWidth:e.Number("outerWidth"),outerHeight:e.Number("outerHeight"),performance:e.Object("performance"),mozInnerScreenX:e.Number("mozInnerScreenX"),mozInnerScreenY:e.Number("mozInnerScreenY"),devicePixelRatio:e.Number("devicePixelRatio"),scrollMaxX:e.Number("scrollMaxX"),scrollMaxY:e.Number("scrollMaxY"),fullScreen:e.Boolean("fullScreen"),content:e.Object("content"),sidebar:e.Object("sidebar"),visualViewport:e.Object("visualViewport"),crypto:e.Object("crypto"),speechSynthesis:e.Object("speechSynthesis"),localStorage:e.Object("localStorage"),origin:e.String("origin"),crossOriginIsolated:e.Boolean("crossOriginIsolated"),isSecureContext:e.Boolean("isSecureContext"),indexedDB:e.Object("indexedDB"),caches:e.Object("caches"),sessionStorage:e.Object("sessionStorage"),window:e.Object("window"),document:e.Object("document"),location:e.Object("location"),top:e.Object("top"),netscape:e.Object("netscape"),console:e.Object("console"),globalThis:e.Object("globalThis")},v={version:e.String("version"),title:e.String("title"),lang:e.String("lang"),dir:e.String("dir"),innerText:e.String("innerText"),hidden:e.Boolean("hidden"),accessKey:e.String("accessKey"),accessKeyLabel:e.String("accessKeyLabel"),draggable:e.Boolean("draggable"),contentEditable:e.String("contentEditable"),isContentEditable:e.Boolean("isContentEditable"),spellcheck:e.Boolean("spellcheck"),nonce:e.String("nonce"),offsetParent:e.Object("offsetParent"),offsetTop:e.Number("offsetTop"),offsetLeft:e.Number("offsetLeft"),offsetWidth:e.Number("offsetWidth"),offsetHeight:e.Number("offsetHeight"),dataset:e.Object("dataset"),tabIndex:e.Number("tabIndex"),onerror:e.Object("onerror"),namespaceURI:e.String("namespaceURI"),prefix:e.Object("prefix"),localName:e.String("localName"),tagName:e.String("tagName"),id:e.String("id"),className:e.String("className"),classList:e.Object("classList"),part:e.Object("part"),attributes:e.Object("attributes"),scrollTop:e.Number("scrollTop"),scrollLeft:e.Number("scrollLeft"),scrollWidth:e.Number("scrollWidth"),scrollHeight:e.Number("scrollHeight"),clientTop:e.Number("clientTop"),clientLeft:e.Number("clientLeft"),clientWidth:e.Number("clientWidth"),clientHeight:e.Number("clientHeight"),scrollTopMax:e.Number("scrollTopMax"),scrollLeftMax:e.Number("scrollLeftMax"),html:e.String("innerHTML"),outerHTML:e.String("outerHTML"),shadowRoot:e.Object("shadowRoot"),assignedSlot:e.Object("assignedSlot"),slot:e.String("slot"),previousElementSibling:e.Object("previousElementSibling"),nextElementSibling:e.Object("nextElementSibling"),children:e.Object("children"),firstElementChild:e.Object("firstElementChild"),lastElementChild:e.Object("lastElementChild"),childElementCount:e.Number("childElementCount"),nodeType:e.Number("nodeType"),nodeName:e.String("nodeName"),baseURI:e.String("baseURI"),isConnected:e.Boolean("isConnected"),ownerDocument:e.Object("ownerDocument"),parentNode:e.Object("parentNode"),parentElement:e.Object("parentElement"),childNodes:e.Object("childNodes"),firstChild:e.Object("firstChild"),lastChild:e.Object("lastChild"),previousSibling:e.Object("previousSibling"),nextSibling:e.Object("nextSibling"),nodeValue:e.Object("nodeValue"),text:e.String("textContent"),name:e.String("name"),httpEquiv:e.String("httpEquiv"),content:e.String("content"),scheme:e.String("scheme"),textProperty:e.String("text"),disabled:e.Boolean("disabled"),href:e.String("href"),crossOrigin:e.Object("crossOrigin"),rel:e.String("rel"),relList:e.Object("relList"),media:e.String("media"),hreflang:e.String("hreflang"),type:e.String("type"),referrerPolicy:e.String("referrerPolicy"),sizes:e.String("sizes"),imageSrcset:e.String("imageSrcset"),imageSizes:e.String("imageSizes"),charset:e.String("charset"),rev:e.String("rev"),target:e.String("target"),integrity:e.String("integrity"),as:e.String("as"),sheet:e.Object("sheet"),link:e.String("link"),vLink:e.String("vLink"),aLink:e.String("aLink"),bgColor:e.String("bgColor"),background:e.String("background"),align:e.String("align"),download:e.String("download"),ping:e.String("ping"),coords:e.String("coords"),shape:e.String("shape"),origin:e.String("origin"),protocol:e.String("protocol"),username:e.String("username"),password:e.String("password"),host:e.String("host"),hostname:e.String("hostname"),port:e.String("port"),pathname:e.String("pathname"),search:e.String("search"),hash:e.String("hash"),compact:e.Boolean("compact"),color:e.String("color"),noShade:e.Boolean("noShade"),size:e.String("size"),width:e.String("width"),reversed:e.Boolean("reversed"),start:e.Number("start"),acceptCharset:e.String("acceptCharset"),action:e.String("action"),autocomplete:e.String("autocomplete"),enctype:e.String("enctype"),encoding:e.String("encoding"),method:e.String("method"),noValidate:e.Boolean("noValidate"),elements:e.Object("elements"),length:e.Number("length"),form:e.Object("form"),willValidate:e.Boolean("willValidate"),validity:e.Object("validity"),validationMessage:e.String("validationMessage"),htmlFor:e.String("htmlFor"),control:e.Object("control"),accept:e.String("accept"),alt:e.String("alt"),autofocus:e.Boolean("autofocus"),defaultChecked:e.Boolean("defaultChecked"),checked:e.Boolean("checked"),files:e.Object("files"),formAction:e.String("formAction"),formEnctype:e.String("formEnctype"),formMethod:e.String("formMethod"),formNoValidate:e.Boolean("formNoValidate"),formTarget:e.String("formTarget"),height:e.String("height"),indeterminate:e.Boolean("indeterminate"),list:e.Object("list"),max:e.Number("max"),maxLength:e.Number("maxLength"),min:e.Number("min"),minLength:e.Number("minLength"),multiple:e.Boolean("multiple"),pattern:e.String("pattern"),placeholder:e.String("placeholder"),readOnly:e.Boolean("readOnly"),required:e.Boolean("required"),src:e.String("src"),step:e.String("step"),defaultValue:e.String("defaultValue"),valueAsDate:e.Object("valueAsDate"),valueAsNumber:e.Number("valueAsNumber"),labels:e.Object("labels"),selectionStart:e.Object("selectionStart"),selectionEnd:e.Object("selectionEnd"),selectionDirection:e.Object("selectionDirection"),useMap:e.String("useMap"),textLength:e.Number("textLength"),webkitEntries:e.Object("webkitEntries"),webkitdirectory:e.Boolean("webkitdirectory"),options:e.Object("options"),selectedOptions:e.Object("selectedOptions"),selectedIndex:e.Number("selectedIndex"),label:e.String("label"),defaultSelected:e.Boolean("defaultSelected"),selected:e.Boolean("selected"),index:e.Number("index"),cols:e.Number("cols"),rows:e.Object("rows"),wrap:e.String("wrap"),cite:e.String("cite"),position:e.Number("position"),low:e.Number("low"),high:e.Number("high"),optimum:e.Number("optimum"),dateTime:e.String("dateTime"),srcset:e.String("srcset"),isMap:e.Boolean("isMap"),decoding:e.String("decoding"),loading:e.String("loading"),naturalWidth:e.Number("naturalWidth"),naturalHeight:e.Number("naturalHeight"),complete:e.Boolean("complete"),hspace:e.Number("hspace"),vspace:e.Number("vspace"),longDesc:e.String("longDesc"),border:e.String("border"),currentSrc:e.String("currentSrc"),lowsrc:e.String("lowsrc"),x:e.Number("x"),y:e.Number("y"),caption:e.Object("caption"),tHead:e.Object("tHead"),tFoot:e.Object("tFoot"),tBodies:e.Object("tBodies"),frame:e.String("frame"),rules:e.String("rules"),summary:e.String("summary"),cellPadding:e.String("cellPadding"),cellSpacing:e.String("cellSpacing"),ch:e.String("ch"),chOff:e.String("chOff"),vAlign:e.String("vAlign"),rowIndex:e.Number("rowIndex"),sectionRowIndex:e.Number("sectionRowIndex"),cells:e.Object("cells"),colSpan:e.Number("colSpan"),rowSpan:e.Number("rowSpan"),headers:e.String("headers"),cellIndex:e.Number("cellIndex"),abbr:e.String("abbr"),scope:e.String("scope"),axis:e.String("axis"),noWrap:e.Boolean("noWrap")};var w={accept:e.String("accept"),accesskey:e.String("accesskey"),action:e.String("action"),align:e.String("align"),allow:e.String("allow"),allowfullscreen:e.Boolean("allowfullscreen"),allowpaymentrequest:e.Boolean("allowpaymentrequest"),alt:e.String("alt"),async:e.Boolean("async"),autocapitalize:e.String("autocapitalize"),autocomplete:e.String("autocomplete"),autofocus:e.Boolean("autofocus"),autoplay:e.Boolean("autoplay"),background:e.String("background"),bgcolor:e.String("bgcolor"),border:e.String("border"),buffered:e.String("buffered"),capture:e.String("capture"),challenge:e.String("challenge"),acceptCharset:e.String("accept-charset"),charset:e.String("charset"),checked:e.Boolean("checked"),cite:e.String("cite"),class:e.String("class"),code:e.String("code"),codebase:e.String("codebase"),color:e.String("color"),cols:e.String("cols"),colspan:e.String("colspan"),content:e.String("content"),contenteditable:e.ContentEditable,contextmenu:e.String("contextmenu"),controls:e.Boolean("controls"),coords:e.String("coords"),crossorigin:e.String("crossorigin"),csp:e.String("csp"),data:e.Object("dataset"),datetime:e.String("datetime"),decoding:e.String("decoding"),default:e.Boolean("default"),defer:e.Boolean("defer"),dir:e.String("dir"),dirname:e.String("dirname"),disabled:e.Boolean("disabled"),download:e.String("download"),draggable:e.String("draggable"),enctype:e.String("enctype"),enterkeyhint:e.String("enterkeyhint"),httpEquiv:e.String("http-equiv"),for:e.String("for"),form:e.String("form"),formaction:e.String("formaction"),formenctype:e.String("formenctype"),formmethod:e.String("formmethod"),formnovalidate:e.Boolean("formnovalidate"),formtarget:e.String("formtarget"),headers:e.String("headers"),height:e.String("height"),hidden:e.Boolean("hidden"),high:e.String("high"),href:e.String("href"),hreflang:e.String("hreflang"),icon:e.String("icon"),id:e.String("id"),importance:e.String("importance"),inputmode:e.String("inputmode"),integrity:e.String("integrity"),intrinsicsize:e.String("intrinsicsize"),ismap:e.Boolean("ismap"),itemid:e.String("itemid"),itemprop:e.String("itemprop"),itemref:e.String("itemref"),itemtype:e.String("itemtype"),itemscope:e.Boolean("itemscope"),keytype:e.String("keytype"),kind:e.String("kind"),label:e.String("label"),lang:e.String("lang"),language:e.String("language"),list:e.String("list"),loading:e.String("loading"),loop:e.Boolean("loop"),low:e.String("low"),manifest:e.String("manifest"),max:e.String("max"),maxlength:e.String("maxlength"),media:e.String("media"),method:e.String("method"),min:e.String("min"),minlength:e.String("minlength"),multiple:e.Boolean("multiple"),muted:e.Boolean("muted"),name:e.String("name"),nomodule:e.Boolean("nomodule"),novalidate:e.Boolean("novalidate"),open:e.Boolean("open"),optimum:e.String("optimum"),pattern:e.String("pattern"),ping:e.String("ping"),placeholder:e.String("placeholder"),playsinline:e.Boolean("playsinline"),poster:e.String("poster"),preload:e.String("preload"),radiogroup:e.String("radiogroup"),readonly:e.Boolean("readonly"),referrerpolicy:e.String("referrerpolicy"),rel:e.String("rel"),required:e.Boolean("required"),reversed:e.Boolean("reversed"),rows:e.String("rows"),rowspan:e.String("rowspan"),sandbox:e.String("sandbox"),scope:e.String("scope"),scoped:e.String("scoped"),selected:e.Boolean("selected"),shape:e.String("shape"),size:e.String("size"),sizes:e.String("sizes"),slot:e.String("slot"),span:e.String("span"),spellcheck:e.String("spellcheck"),src:e.String("src"),srcdoc:e.String("srcdoc"),srclang:e.String("srclang"),srcset:e.String("srcset"),start:e.String("start"),step:e.String("step"),style:e.String("style"),summary:e.String("summary"),tabindex:e.String("tabindex"),target:e.String("target"),title:e.String("title"),translate:e.String("translate"),truespeed:e.Boolean("truespeed"),type:e.String("type"),usemap:e.String("usemap"),value:e.Value("value"),width:e.String("width"),wrap:e.String("wrap")};var p=t=>(n,...r)=>(o,...i)=>(n in o||(o[n]=t(n,...r)(o,...i)),o[n](...i)),[z]=["x-template"],C=["x-scope","x-ref","x-each","x-key"],[u,d,g,l]=C,V=C.map(t=>`[${t}]`).join(),k=(t,n,r)=>{let o=t.closest(V);return o?![d,u,g,l].includes(r)&&o[l]?o[l]():![d,u,g].includes(r)&&o[g]?o[g]():![d,u].includes(r)&&o[u]?o[u]():![d].includes(r)&&o[d]?o[d]():k(t.parentElement,n,r):n},T=t=>{let n=parseInt(t);return n===n},H=(t,n)=>r=>{let o=r.getAttribute(t),i=T(o)?`[${o}]`:o,a=`(...a) => a.length ? (obj${i} = a[0]) : obj${i}`,s=`(e) => console.error("failed to resolve ${i} on", obj, "\\nERROR:", e)`,c=`return maybe( ${a}, ${s} );`;return Function("maybe","obj",c)(x,k(r,n,t))},f=(t,...n)=>(r,...o)=>Function(...n,r.getAttribute(t)).bind(r),O={event:t=>n=>p(f)(t,"event")(n.target,n),entry:t=>n=>p(f)(t,"entry")(n.target,n),js:p(f),path:p(H)},$=t=>S.children(t,"*:not(template)").reduce((n,r)=>{let o=r.getAttribute(l);return n.has(o)?n.get(o).push(r):n.set(o,[r]),n},new Map),q=t=>{let n=S.children(t,"template"),o=[y(`template#${t.getAttribute(z)}`),...n].filter(i=>i).flatMap(i=>[...i.content.children]);return i=>o.map(a=>{let s=a.cloneNode(!0);return s.setAttribute(l,i),s})},W=(t,n,r)=>{let o=q(t),i=a=>{let s=n.get(r[a-1]),c=s[s.length-1];return L=>c.insertAdjacentElement("afterend",L)};return a=>{let s=o(a),c=r.indexOf(a);c?s.forEach(i(c)):t.prepend(...s),n.set(a,s)}},_=t=>n=>{let r=t.get(n);r.forEach(o=>o.remove()),r.length=0,t.delete(n)},I=t=>{let n=t[g](),r=Object.keys(Array.isArray(n)?[...n]:{...n}),o=$(t),i=[...o.keys()],a=i.filter(c=>!r.includes(c)),s=r.filter(c=>!i.includes(c));return{obj:n,objKeys:r,dom:o,domKeys:i,justDom:a,justObj:s}},F=t=>{let{justDom:n,justObj:r,dom:o,objKeys:i}=I(t);r.length&&r.forEach(W(t,o,i)),n.length&&n.forEach(_(o))},K=t=>{let{justDom:n,justObj:r,obj:o}=I(t);n.length&&n.forEach(i=>o[i]=T(i)?[]:{}),r.length&&r.forEach(i=>delete o[i])},Y=t=>({each:n=>{let r=new Map;return{select:`[${g}]`,update:o=>{if(o.isConnected&&o.hasAttribute(g)){if(O.path(g,n)(o),K(o),!r.has(o)){let i=B(()=>F(o));r.set(o,i)}}else r.has(o)&&E(r.get(o)),r.delete(o)}}},key:n=>{let r=new Set,o=i=>{let a=i[l]();if(!a)return;let s={...a},c=()=>Object.assign(a,s)};return{select:`[${l}]`,update:i=>{i.isConnected&&i.hasAttribute(l)?(O.path(l,n)(i),r.has(i)||o(i)):r.delete(i)}}},then:()=>{}}),M=(t,n)=>{let r=t();b(r,n())||n(r)},X=(t,n)=>r=>{let o=new Map;return{select:`[${t}]`,update:i=>{if(i.isConnected&&i.hasAttribute(t)){if(O.path(t,r)(i),M(n(i),i[t]),!o.has(i)){let a=B(()=>M(i[t],n(i)));o.set(i,a)}}else o.has(i)&&E(o.get(i)),o.delete(i)}}},U=(t="x-")=>{let n=Object.assign({},{aria:N},w,v),r=Object.entries(h(n,{join:o=>`${o}-`})).map(([o,i])=>{let a=t+j(o);return X(a,i)});return[...Object.values(Y(t)),...r]},ie=t=>{let n={model:D({}),plugins:U,prefix:"x-"},r=Object.assign(n,t);return r.plugins(r.prefix).map(o=>o(model))};export{ie as init,U as plugins,O as resolve};
//# sourceMappingURL=codec.js.map
